---
keywords: client care, cname, programa certificado, nombre canÃ³nico, cookies, certificado, amc, adobe managed certificate, digicert, validaciÃ³n de control de dominio, dcv, client care2
description: Trabaje con [!UICONTROL Adobe Client Care] para implementar la compatibilidad con CNAME (nombre canÃ³nico) en  [!DNL Adobe Target] para controlar los problemas de bloqueo de anuncios.
title: Â¿CÃ³mo utilizo CNAME en Target?
feature: Privacy & Security
exl-id: 5709df5b-6c21-4fea-b413-ca2e4912d6cb
source-git-commit: 353597cbbd3478e9598bd42303619440b3b478fd
workflow-type: tm+mt
source-wordcount: '1580'
ht-degree: 0%

---

# CNAME y Target

Instrucciones para trabajar con [!DNL Adobe Client Care] a fin de implementar el soporte de CNAME (nombre canÃ³nico) en [!DNL Adobe Target]. Utilice CNAME para gestionar los problemas de bloqueo de anuncios o las polÃ­ticas de cookies relacionadas con ITP (PrevenciÃ³n inteligente del seguimiento). Con CNAME, las llamadas se realizan a un dominio propiedad del cliente en lugar de a un dominio propiedad de Adobe.

## Solicitar compatibilidad con CNAME en Target

1. Determine la lista de nombres de host que necesita para su certificado SSL (consulte las preguntas frecuentes a continuaciÃ³n).

1. Para cada nombre de host, cree un registro CNAME en su DNS que apunte a su nombre de host [!DNL Target] normal `clientcode.tt.omtrdc.net`.

   Por ejemplo, si el cÃ³digo de cliente es &quot;cnamecustomer&quot; y el nombre de host propuesto es `target.example.com`, el registro CNAME de DNS tendrÃ¡ un aspecto similar al siguiente:

   ```
   target.example.com.  IN  CNAME  cnamecustomer.tt.omtrdc.net.
   ```

   >[!WARNING]
   >
   >La autoridad de certificaciÃ³n de Adobe, DigiCert, no puede emitir un certificado hasta que se complete este paso. Por lo tanto, Adobe no puede cumplir su solicitud de implementaciÃ³n CNAME hasta que se complete este paso.

1. [Rellene este formulario](assets/FPC_Request_Form.xlsx) e inclÃºyalo cuando [abra un ticket de Adobe Client Care solicitando asistencia de CNAME](https://experienceleague.adobe.com/docs/target/using/cmp-resources-and-contact-information.html?#reference_ACA3391A00EF467B87930A450050077C):

   * [!DNL Adobe Target] cÃ³digo de cliente:
   * Nombres de host de certificado SSL (ejemplo: `target.example.com target.example.org`):
   * Comprador de certificados SSL (se recomienda encarecidamente Adobe, consulte las preguntas frecuentes): Adobe/cliente
   * Si el cliente estÃ¡ comprando el certificado, tambiÃ©n conocido como &quot;Traer su propio certificado&quot; (BYOC), rellene estos detalles adicionales:
      * OrganizaciÃ³n del certificado (ejemplo: Empresa de ejemplo Inc):
      * Unidad organizativa del certificado (opcional, ejemplo: Marketing):
      * PaÃ­s del certificado (ejemplo: EE. UU.):
      * Estado o regiÃ³n del certificado (ejemplo: California):
      * Ciudad del certificado (ejemplo: San JosÃ©):

1. Si Adobe compra el certificado, Adobe trabaja con DigiCert para adquirir e implementar el certificado en los servidores de producciÃ³n de Adobe.

   Si el cliente estÃ¡ comprando el certificado (BYOC), Adobe Client Care le envÃ­a la solicitud de firma de certificado (CSR). Utilice el CSR cuando compre el certificado a travÃ©s de la autoridad de certificaciÃ³n que elija. Una vez emitido el certificado, envÃ­e una copia del mismo y de los certificados intermedios a Adobe Client Care para su implementaciÃ³n.

   Adobe Client Care le notifica cuando su implementaciÃ³n estÃ¡ lista.

1. Actualice la `serverDomain`documentaciÃ³n[ de ](../implement/client-side/atjs/atjs-functions/targetglobalsettings.md#serverdomain) al nuevo nombre de host CNAME y establezca `overrideMboxEdgeServer` en `false` [documentaciÃ³n](../implement/client-side/atjs/atjs-functions/targetglobalsettings.md#overridemboxedgeserver) en su configuraciÃ³n de at.js.

## Preguntas frecuentes

La siguiente informaciÃ³n responde a las preguntas mÃ¡s frecuentes sobre la solicitud y la implementaciÃ³n de la compatibilidad con CNAME en Target:

### Â¿Puedo proporcionar mi propio certificado (Traer su propio certificado o BYOC)?

Puede proporcionar su propio certificado. Sin embargo, Adobe no recomienda esta prÃ¡ctica. La administraciÃ³n del ciclo de vida del certificado SSL es mÃ¡s sencilla tanto para Adobe como para usted si Adobe compra y controla el certificado. Los certificados SSL deben renovarse cada aÃ±o. Por lo tanto, Adobe Client Care debe ponerse en contacto con usted cada aÃ±o para obtener un nuevo certificado de forma oportuna. Algunos clientes pueden tener dificultades para producir un certificado renovado de manera oportuna. La implementaciÃ³n de [!DNL Target] se pone en peligro cuando caduca el certificado porque los exploradores rechazan las conexiones.

>[!WARNING]
>
>Si solicita una implementaciÃ³n CNAME de [!DNL Target] que traiga su propio certificado, usted es responsable de proporcionar certificados renovados a Adobe Client Care cada aÃ±o. Si permite que el certificado CNAME caduque antes de que Adobe pueda implementar un certificado renovado, se producirÃ¡ una interrupciÃ³n en la implementaciÃ³n de [!DNL Target] especÃ­fica.

### Â¿CuÃ¡nto falta para que caduque mi nuevo certificado SSL?

Todos los certificados adquiridos por Adobe son vÃ¡lidos durante un aÃ±o. Consulte el artÃ­culo de [DigiCert sobre certificados de 1 aÃ±o](https://www.digicert.com/blog/position-on-1-year-certificates) para obtener mÃ¡s informaciÃ³n.

### Â¿QuÃ© nombres de host debo elegir? Â¿CuÃ¡ntos nombres de host por dominio debo elegir?

Las implementaciones de CNAME de Target solo requieren un nombre de host por dominio en el certificado SSL y en el DNS del cliente. Adobe recomienda un nombre de host por dominio. Algunos clientes requieren mÃ¡s nombres de host por dominio para sus propios fines (como probar en el ensayo), lo cual es compatible.

La mayorÃ­a de los clientes elige un nombre de host como `target.example.com`. Adobe recomienda seguir esta prÃ¡ctica, pero la opciÃ³n es, en Ãºltima instancia, suya. No solicite un nombre de host de un registro DNS existente. Al hacerlo, se genera un conflicto y se retrasa el tiempo de resoluciÃ³n de la solicitud CNAME [!DNL Target].

### Ya tengo una implementaciÃ³n CNAME para Adobe Analytics, Â¿puedo utilizar el mismo certificado o nombre de host?

No, [!DNL Target] requiere un nombre de host y un certificado independientes.

### Â¿Se ve afectada mi implementaciÃ³n actual de [!DNL Target] por ITP 2.x?

Apple Intelligent Tracking Prevention (ITP) versiÃ³n 2.3 ha introducido su funciÃ³n de mitigaciÃ³n de ocultaciÃ³n CNAME, que puede detectar implementaciones CNAME de [!DNL Target] y reduce la caducidad de la cookie a siete dÃ­as. Actualmente [!DNL Target] no cuenta con una soluciÃ³n alternativa para la mitigaciÃ³n de encubrimiento CNAME de ITP. Para obtener mÃ¡s informaciÃ³n sobre ITP, consulte [PrevenciÃ³n inteligente del seguimiento de Apple (ITP) 2.x](../before-implement/privacy/apple-itp-2x.md).

### Â¿QuÃ© tipo de interrupciones de servicio puedo esperar cuando se implementa mi implementaciÃ³n CNAME?

No hay interrupciones en el servicio cuando se implementa el certificado (incluidas las renovaciones de certificados).

Sin embargo, despuÃ©s de cambiar el nombre de host en el cÃ³digo de implementaciÃ³n de [!DNL Target] (`serverDomain` en at.js) por el nuevo nombre de host CNAME (`target.example.com`), los exploradores web tratan a los visitantes que regresan como nuevos visitantes. Los datos de perfil de los visitantes que regresan se pierden porque no se puede obtener acceso a la cookie anterior con el nombre de host anterior (`clientcode.tt.omtrdc.net`). No se puede acceder a la cookie anterior debido a los modelos de seguridad del explorador. Esta interrupciÃ³n se produce Ãºnicamente en la transiciÃ³n inicial al nuevo CNAME. Las renovaciones de certificados no tienen el mismo efecto porque el nombre de host no cambia.

### Â¿QuÃ© tipo de clave y algoritmo de firma de certificado se utiliza para mi implementaciÃ³n CNAME?

De forma predeterminada, todos los certificados son RSA SHA-256 y las claves son RSA de 2048 bits. Los tamaÃ±os de clave superiores a 2048 bits deben solicitarse explÃ­citamente a travÃ©s de [!UICONTROL Customer Care].

### Â¿CÃ³mo puedo validar que mi implementaciÃ³n CNAME estÃ¡ lista para el trÃ¡fico?

Utilice el siguiente conjunto de comandos (en el terminal de lÃ­nea de comandos de macOS o Linux, utilizando bash y curl >=7.49):

1. Copie y pegue esta funciÃ³n bash en su terminal, o pegue la funciÃ³n en su archivo de script de inicio bash (normalmente `~/.bash_profile` o `~/.bashrc`) para que la funciÃ³n estÃ© disponible entre sesiones de terminal:

   ```bash {line-numbers="true"}
    function adobeTargetCnameValidation {
   
     local hostname="$1"
   
     if [ -z "$hostname" ]; then
       echo "ERROR: no hostname specified"
       return 1
     fi
   
     local service="Adobe Target CNAME implementation"
     local edges="41 42 44 45 46 47 48"
     local edgeDomain="tt.omtrdc.net"
     local edgeFormat="mboxedge%d%s.$edgeDomain"
     local poolDomain="pool.data.adobedc.net"
     local shards=5
     local shardsFoundCount=0
     local shardsFound=""
     local shardsFoundOutput=""
     local curlRegex="subject:.*CN=|expire date:|issuer:"
     local curlValidation="SSL certificate verify ok"
     local curlResponseValidation='"OK"'
     local curlEndpoint="/uptime?mboxClient=uptime3"
     local url="https://$hostname$curlEndpoint"
     local sslShopperUrl="https://www.sslshopper.com/ssl-checker.html#hostname=$hostname"
     local success="âœ…"
     local failure="ðŸš«"
     local info="ðŸ”Ž"
     local rule="="
     local horizontalRule="$(seq ${COLUMNS:-30} | xargs printf "$rule%.0s")"
     local miniRule="$(seq 5 | xargs printf "$rule%.0s")"
     local curlVersion="$(curl --version | head -1 | cut -d' ' -f2)"
     local curlVersionRequired=7.49
     local edgeCount="$(wc -w <<< "$edges" | tr -d ' ')"
     local cnameExists=""
     local endToEndTestSucceeded=""
   
     for region in IRL1 IND1 SIN OR SYD VA TYO; do
       local currShard="${region}-${poolDomain}"
       local curlResult="$(curl -vsm20 --connect-to "$hostname:443:$currShard:443" "$url" 2>&1)"
   
       if grep -q "$curlValidation" <<< "$curlResult"; then
         shardsFound+=" $currShard"
   
         if grep -q "$curlResponseValidation" <<< "$curlResult"; then
           shardsFoundCount=$((shardsFoundCount+1))
           shardsFoundOutput+="\n\n$miniRule $success $hostname [edge shard: $currShard] $miniRule\n"
         else
           shardsFoundOutput+="\n\n$miniRule $failure $hostname [edge shard: $currShard] $miniRule\n"
         fi
   
         shardsFoundOutput+="$(grep -E "$curlRegex" <<< "$curlResult" | sort)"
   
         if ! grep -q "$curlResponseValidation" <<< "$curlResult"; then
           shardsFoundOutput+="\nERROR: unexpected HTTP response from this shard using $url"
         fi
       fi
     done
   
     echo
     echo "$horizontalRule"
     echo
     echo "$service validation for hostname $hostname:"
   
     local dnsOutput="$(dig -t CNAME +short "$hostname" 2>&1)"
     if grep -qFi ".$edgeDomain" <<< "$dnsOutput"; then
       echo "$success $hostname passes DNS CNAME validation"
       cnameExists=true
     else
       echo -n "$failure $hostname FAILED DNS CNAME validation -- "
       if [ -n "$dnsOutput" ]; then
         echo -e "$dnsOutput is not in the subdomain $edgeDomain"
       else
         echo "required DNS CNAME record pointing to <target-client-code>.$edgeDomain not found"
       fi
     fi
   
     for region in IRL1 IND1 SIN OR SYD VA TYO; do
       local curlResult="$(curl -vsm20 --connect-to "$hostname:443:${region}-pool.data.adobedc.net:443" "https://$hostname$curlEndpoint" 2>&1)"
   
       if grep -q "$curlValidation" <<< "$curlResult"; then
         if grep -q "$curlResponseValidation" <<< "$curlResult"; then
           echo -en "$success $hostname passes TLS and HTTP response validation for region $region"
           if [ -n "$cnameExists" ]; then
             echo
           else
             echo " -- the DNS CNAME is not pointing to the correct subdomain for ${service}s with Adobe-managed certificates" \
               "(bring-your-own-certificate implementations don't have this requirement), but this test passes as configured"
           fi
           endToEndTestSucceeded=true
         else
           echo -n "$failure $hostname FAILED HTTP response validation for region $region --" \
             "unexpected response from $url -- "
           if [ -n "$cnameExists" ]; then
             echo "DNS is NOT pointing to the correct shard, notify Adobe Client Care"
           else
             echo "the required DNS CNAME record is missing, see above"
           fi
         fi
       else
         echo -n "$failure $hostname FAILED TLS validation for region $region -- "
         if [ -n "$cnameExists" ]; then
           echo "DNS is likely NOT pointing to the correct shard or there's a validation issue with the certificate or" \
             "protocols, see curl output below and optionally SSL Shopper ($sslShopperUrl):"
           echo ""
           echo "$horizontalRule"
           echo "$curlResult" | sed 's/^/    /g'
           echo "$horizontalRule"
           echo ""
         else
           echo "the required DNS CNAME record is missing, see above"
         fi
       fi
     done
   
     if [ "$shardsFoundCount" -ge "$edgeCount" ]; then
       echo -n "$success $hostname passes shard validation for the following $shardsFoundCount edge shards:"
       echo -e "$shardsFoundOutput"
       echo
   
       if [ -n "$cnameExists" ] && [ -n "$endToEndTestSucceeded" ]; then
         echo "$horizontalRule"
         echo ""
         echo "  For additional TLS/SSL validation, see SSL Shopper:"
         echo ""
         echo "    $info  $sslShopperUrl"
         echo ""
         echo "  To check DNS propagation around the world, see whatsmydns.net:"
         echo ""
         echo "    $info  DNS A records:     https://whatsmydns.net/#A/$hostname"
         echo "    $info  DNS CNAME record:  https://whatsmydns.net/#CNAME/$hostname"
       fi
     else
       echo -n "$failure $hostname FAILED shard validation -- shards found: $shardsFoundCount," \
         "expected: $edgeCount"
       echo ""
     fi
   
     echo
     echo "$horizontalRule"
     echo
   }
   ```

1. Pegue este comando (reemplazando `target.example.com` con su nombre de host):

   ```adobeTargetCnameValidation target.example.com```

Si la implementaciÃ³n estÃ¡ lista, verÃ¡ el resultado como se muestra a continuaciÃ³n. Lo importante es que todas las lÃ­neas de estado de validaciÃ³n muestren `âœ…` en lugar de `ðŸš«`. Cada recurso compartido CNAME de Edge de Target debe mostrar `CN=target.example.com`, que coincide con el nombre de host principal del certificado solicitado (los nombres de host de SAN adicionales del certificado no se imprimen en esta salida).

    +++ Ver detalles
    
    &quot;bash {line-numbers=&quot;true&quot;}
    $ adobeTargetCnameValidation
    target.example.com============================================================ validaciÃ³n de implementaciÃ³n CNAME de Adobe Target para hostname target.example.com:
    âœ… target.example.com pasa la validaciÃ³n de CNAME de DNS
    âœ… target.example.com pasa la validaciÃ³n de respuesta TLS y HTTP para region IRL1
    âœ… target.example.com pasa y la validaciÃ³n de respuesta HTTP para la regiÃ³n IND1
    âœ… target.example.com pasa la validaciÃ³n de respuesta TLS y HTTP para la regiÃ³n SIN
    âœ… target.example.com pasa la validaciÃ³n de respuesta TLS y HTTP para la regiÃ³n OR
    âœ… target.example.com pasa la validaciÃ³n de respuesta TLS y HTTP para la regiÃ³n SYD
    âœ… target.example.com pasa la validaciÃ³n de respuesta TLS y HTTP para la regiÃ³n VA
    âœ… target.example.com pasa la validaciÃ³n de respuesta TLS y HTTP para la regiÃ³n TYO
    âœ… target.example.com pasa la validaciÃ³n de particiÃ³n para los siguientes 7 fragmentos de Edge:===== âœ… target.example.com [fragmento de Edge: IRL1-pool.data.adobedc.net] =====
     fecha de caducidad: feb. fecha 14&rbrace;* 20 23:59:59 2026 GMT
    * emisor: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
    * asunto: C=US; ST=California; L=San JosÃ©; O=Adobe Systems Incorporated; CN=target.example.com===== âœ… target.example.com [edge shard: IND1-pool.data.adobedc.net] =====
    * fecha de caducidad: 20/Feb/23/20&rbrace;59/2026 GMT:59:* emisor: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
    * asunto: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com===== 
     target.example.com [Edge Shard: SIN-pool.data.adobedc.net] =====âœ…* fecha de caducidad: 20 de febrero de 23
    59 2026 GMT:59:* emisor: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
    * asunto: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com===== &lbrace;2target.example.com OR-pool.data.adobedc.net&rbrack; =====
    * fecha de caducidad: 20 de febrero de 23âœ…59 2026 GMT
    * emisor: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1:59:* asunto: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com===== 
     [edge shard: SYD-pool.data.adobedc.net] =====
    * fecha de caducidad: 20 de febrero de 23âœ…59 2026 GMT
    * emisor: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1:59:* asunto: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com===== 
     target.example.com [edge shard: VA-pool.data.adobedc.net] =====
    * fecha de caducidad: 20 de febrero de 23âœ…59 2026 GMT
    * emisor: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1:59:* asunto: C=US; ST=California; L=San Jose; Incorporated CN=target.example.com===== 
     target.example.com target.example.com [edge shard: TYO-pool.data.adobedc.net] =====
    * fecha de caducidad: 20 de febrero de 23âœ…59 2026 GMT
    * emisor: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1:59:* asunto: C=US; ST=California; L=San JosÃ© O=Adobe Systems Incorporated; CN=target.example.com========================================================== Para obtener mÃ¡s informaciÃ³n sobre la validaciÃ³n de TLS/SSL, consulte Comprador de SSL.    
     https://www.sslshopper.com/ssl-checker.html#hostname=target.example.com Para comprobar la propagaciÃ³n de DNS en todo el mundo, consulte whatsmydns.net:    
     registros A de DNS:     Registro CNAME DNS de https://whatsmydns.net/#A/target.example.comðŸ”Ž: https://whatsmydns.net/#CNAME/target.example.comðŸ”Ž&quot;
    +++ðŸ”Ž
    
    
    

>[!NOTE]
>
>Si este comando de validaciÃ³n falla en la validaciÃ³n de DNS pero ya ha realizado los cambios de DNS necesarios, es posible que tenga que esperar a que las actualizaciones de DNS se propaguen completamente. Los registros DNS tienen un [TTL (tiempo de vida)](https://en.wikipedia.org/wiki/Time_to_live#DNS_records) asociado que dicta el tiempo de caducidad de la cachÃ© para las respuestas DNS de esos registros. Como resultado, es posible que tenga que esperar al menos el tiempo que sus TTL. Puede usar el comando `dig target.example.com` o [G Suite Toolbox](https://toolbox.googleapps.com/apps/dig/#CNAME) para buscar los TTL especÃ­ficos. Para comprobar la propagaciÃ³n de DNS por todo el mundo, vea [whatsmydns.net](https://whatsmydns.net/#CNAME).

### Â¿CÃ³mo utilizo un vÃ­nculo de no participaciÃ³n con CNAME?

Si utiliza CNAME, el vÃ­nculo de no participaciÃ³n debe contener el parÃ¡metro &quot;client=`clientcode`&quot;, por ejemplo:
`https://my.cname.domain/optout?client=clientcode`.

Reemplace `clientcode` por su cÃ³digo de cliente y luego agregue el texto o la imagen que se vincularÃ¡ a la [URL de exclusiÃ³n](privacy/privacy.md).

## Limitaciones conocidas

* El modo de control de calidad no se fija cuando tiene CNAME y at.js 1.x porque se basa en una cookie de terceros. La soluciÃ³n consiste en agregar los parÃ¡metros de vista previa a cada direcciÃ³n URL a la que vaya. El modo de control de calidad es fijo cuando tiene CNAME y at.js 2.x.
* Al utilizar CNAME, es mÃ¡s probable que aumente el tamaÃ±o del encabezado de la cookie para [!DNL Target] llamadas. Adobe recomienda mantener el tamaÃ±o de la cookie por debajo de 8 KB.
